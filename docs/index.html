<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Really, Really, Ridiculously Fast Tweet Data • tweetio</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet">
<meta property="og:title" content="Really, Really, Ridiculously Fast Tweet Data">
<meta property="og:description" content="
    `{tweetio}`'s goal is to go from raw tweets to `{rtweet}`-style data frames 
    as fast as possible, whether or not the data came from the Twitter API, a 
    database dump, or some other library.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-140885143-4"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-140885143-4');
</script>
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">tweetio</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://twitter.com/knapply_">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/knapply/tweetio">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">

<div id="tweetio" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#tweetio" class="anchor"></a><code>{tweetio}</code>
</h1></div>
<!-- badges: start -->

</div>
<div id="progress" class="section level1">
<h1 class="hasAnchor">
<a href="#progress" class="anchor"></a>Progress</h1>
<div id="supported-data-inputs" class="section level3">
<h3 class="hasAnchor">
<a href="#supported-data-inputs" class="anchor"></a>Supported Data Inputs</h3>
<ul>
<li>
<input type="checkbox" disabled checked>
Twitter API streams: .json, .json.gz</li>
<li>
<input type="checkbox" disabled checked>
API to Elasticsearch data dump (JSON Array): .json, .json.gz</li>
<li>
<input type="checkbox" disabled checked>
API to Elasticsearch data dump (line-delimited JSON): .jsonl, .jsonl.gz</li>
</ul>
</div>
<div id="supported-data-outputs" class="section level3">
<h3 class="hasAnchor">
<a href="#supported-data-outputs" class="anchor"></a>Supported Data Outputs</h3>
<ul>
<li>
<input type="checkbox" disabled checked>
.graphml, currently available in <a href="https://knapply.github.io/tweetgraph/"><code>{tweetgraph}</code></a>
</li>
<li>
<input type="checkbox" disabled>
CSV (will likely be CSVY once <code>{data.table}</code>’s <code>fread(yaml = TRUE)</code> feature stabilizes)</li>
</ul>
</div>
<div id="extras" class="section level3">
<h3 class="hasAnchor">
<a href="#extras" class="anchor"></a>Extras</h3>
<ul>
<li>
<input type="checkbox" disabled checked>
Spatial Tweets via <code><a href="reference/as_tweet_sf.html">tweetio::as_tweet_sf()</a></code>
</li>
</ul>
</div>
</div>
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p><strong>The <a href="https://rtweet.info/"><code>{rtweet}</code></a> package spoils R users <em>rotten</em>… in the best possible way</strong>. The behind-the-scenes data carpentry is so seamless that the user doesn’t need to know anything about the horrors of Twitter data, which is pretty amazing. If you use <code>{rtweet}</code>, you owe Mike Kearney some serious gratitude/citations.</p>
<p><code>{tweetio}</code> is <strong>not</strong> a competitor to <code>{rtweet}</code>, but it definitely attempts to emulate its data frame schema because…</p>
<ol>
<li>It’s incredibly easy to use.</li>
<li>It’s more efficient to analyze than a key-value format following the raw data.</li>
<li>It’d be a waste not to maximize compatibiltiy with tools built specifically around <code>{rtweet}</code>’s data frames.</li>
</ol>
<blockquote>
<p><em><strong>You</strong> bring the tweets, <code>{tweetio}</code> gets them into R.</em></p>
</blockquote>
<p><code>{tweetio}</code> (mainly) focuses on one thing: <strong>going from raw tweets to <code>{rtweet}</code>-style data frames (or other useful structures) as quickly and efficiently as possible</strong>. Whether the data came from the Twitter API, a database dump, or some other source, <code>{tweetio}</code>’s job is to get them into R.</p>
</div>
<div id="installation" class="section level1">
<h1 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h1>
<p>You’ll need a C++ compiler. You can check if you’re ready to go by running the following code:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="co"># install.packages("pkgbuild")</span></a>
<a class="sourceLine" id="cb1-2" title="2">pkgbuild<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/pkgbuild/man/has_build_tools.html">check_build_tools</a></span>()</a></code></pre></div>
<p>If you’re using Windows, you’ll need <a href="https://cran.r-project.org/bin/windows/Rtools/">Rtools</a>.</p>
<p>You probably want to follow the page’s advice and select the recommended version, which is currently Rtools35.exe. When you’re installing Rtools, you need to make sure you check the box stating “Add rtools to system PATH”.</p>
<p>I have needed to reboot every computer on which I’ve installed Rtools before I could compile an R package.</p>
<p>Once you’re done, reboot. Then you can install <code>{tweetio}</code>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="co"># install.packages("remotes")</span></a>
<a class="sourceLine" id="cb2-2" title="2">remotes<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/remotes/man/install_github.html">install_github</a></span>(<span class="st">"knapply/tweetio"</span>)</a></code></pre></div>
</div>
<div id="usage" class="section level1">
<h1 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h1>
<div id="simple-example" class="section level2">
<h2 class="hasAnchor">
<a href="#simple-example" class="anchor"></a>Simple Example</h2>
<p>First, we’ll save a stream of tweets using <code><a href="https://rdrr.io/pkg/rtweet/man/stream_tweets.html">rtweet::stream_tweets()</a></code>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">temp_file &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/tempfile.html">tempfile</a></span>(<span class="dt">fileext =</span> <span class="st">".json"</span>)</a>
<a class="sourceLine" id="cb3-2" title="2">rtweet<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/rtweet/man/stream_tweets.html">stream_tweets</a></span>(<span class="dt">timeout =</span> <span class="dv">15</span>, <span class="dt">parse =</span> <span class="ot">FALSE</span>, <span class="dt">file_name =</span> temp_file)</a></code></pre></div>
<p>We can then pass the file path to <code><a href="reference/read_tweets.html">tweetio::read_tweets()</a></code> to efficiently parse the data into an <code>{rtweet}</code>-style data frame.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(tweetio)</a>
<a class="sourceLine" id="cb4-2" title="2"></a>
<a class="sourceLine" id="cb4-3" title="3">small_rtweet_stream &lt;-<span class="st"> </span><span class="kw"><a href="reference/read_tweets.html">read_tweets</a></span>(temp_file)</a>
<a class="sourceLine" id="cb4-4" title="4">dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/reexports.html">glimpse</a></span>(small_rtweet_stream)</a></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="co">#&gt; Observations: 460</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="co">#&gt; Variables: 87</span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="co">#&gt; $ user_id                 &lt;chr&gt; "1187260058515603456", "2946355818", "...</span></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="co">#&gt; $ status_id               &lt;chr&gt; "1193259594451042304", "11932595944216...</span></a>
<a class="sourceLine" id="cb5-5" title="5"><span class="co">#&gt; $ created_at              &lt;dttm&gt; 2019-11-09 20:10:31, 2019-11-09 20:10...</span></a>
<a class="sourceLine" id="cb5-6" title="6"><span class="co">#&gt; $ screen_name             &lt;chr&gt; "bbot5forever", "eangnunchaya", "casar...</span></a>
<a class="sourceLine" id="cb5-7" title="7"><span class="co">#&gt; $ text                    &lt;chr&gt; "Bigbang is the best runningman guest....</span></a>
<a class="sourceLine" id="cb5-8" title="8"><span class="co">#&gt; $ source                  &lt;chr&gt; "&lt;a href=\"http://twitter.com/download...</span></a>
<a class="sourceLine" id="cb5-9" title="9"><span class="co">#&gt; $ reply_to_status_id      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span></a>
<a class="sourceLine" id="cb5-10" title="10"><span class="co">#&gt; $ reply_to_user_id        &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span></a>
<a class="sourceLine" id="cb5-11" title="11"><span class="co">#&gt; $ reply_to_screen_name    &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span></a>
<a class="sourceLine" id="cb5-12" title="12"><span class="co">#&gt; $ is_quote                &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FAL...</span></a>
<a class="sourceLine" id="cb5-13" title="13"><span class="co">#&gt; $ is_retweeted            &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FAL...</span></a>
<a class="sourceLine" id="cb5-14" title="14"><span class="co">#&gt; $ hashtags                &lt;list&gt; [&lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;"URGENTE", "Bol...</span></a>
<a class="sourceLine" id="cb5-15" title="15"><span class="co">#&gt; $ urls_expanded_url       &lt;list&gt; [&lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, ...</span></a>
<a class="sourceLine" id="cb5-16" title="16"><span class="co">#&gt; $ media_expanded_url      &lt;list&gt; [&lt;&gt;, &lt;&gt;, "https://twitter.com/cdzonan...</span></a>
<a class="sourceLine" id="cb5-17" title="17"><span class="co">#&gt; $ media_url               &lt;list&gt; [&lt;&gt;, &lt;&gt;, "http://pbs.twimg.com/media/...</span></a>
<a class="sourceLine" id="cb5-18" title="18"><span class="co">#&gt; $ media_type              &lt;list&gt; [&lt;&gt;, &lt;&gt;, "photo", "photo", "photo", &lt;...</span></a>
<a class="sourceLine" id="cb5-19" title="19"><span class="co">#&gt; $ mentions_user_id        &lt;list&gt; [&lt;&gt;, "2274558024", &lt;"338255654", "110...</span></a>
<a class="sourceLine" id="cb5-20" title="20"><span class="co">#&gt; $ mentions_screen_name    &lt;list&gt; [&lt;&gt;, "arielqueenss", &lt;"cdzonanorte", ...</span></a>
<a class="sourceLine" id="cb5-21" title="21"><span class="co">#&gt; $ lang                    &lt;chr&gt; "en", "th", "es", "ru", "en", "es", "p...</span></a>
<a class="sourceLine" id="cb5-22" title="22"><span class="co">#&gt; $ quoted_status_id        &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span></a>
<a class="sourceLine" id="cb5-23" title="23"><span class="co">#&gt; $ quoted_text             &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span></a>
<a class="sourceLine" id="cb5-24" title="24"><span class="co">#&gt; $ quoted_created_at       &lt;dttm&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, N...</span></a>
<a class="sourceLine" id="cb5-25" title="25"><span class="co">#&gt; $ quoted_source           &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span></a>
<a class="sourceLine" id="cb5-26" title="26"><span class="co">#&gt; $ quoted_favorite_count   &lt;int&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span></a>
<a class="sourceLine" id="cb5-27" title="27"><span class="co">#&gt; $ quoted_retweet_count    &lt;int&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span></a>
<a class="sourceLine" id="cb5-28" title="28"><span class="co">#&gt; $ quoted_user_id          &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span></a>
<a class="sourceLine" id="cb5-29" title="29"><span class="co">#&gt; $ quoted_screen_name      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span></a>
<a class="sourceLine" id="cb5-30" title="30"><span class="co">#&gt; $ quoted_name             &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span></a>
<a class="sourceLine" id="cb5-31" title="31"><span class="co">#&gt; $ quoted_followers_count  &lt;int&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span></a>
<a class="sourceLine" id="cb5-32" title="32"><span class="co">#&gt; $ quoted_friends_count    &lt;int&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span></a>
<a class="sourceLine" id="cb5-33" title="33"><span class="co">#&gt; $ quoted_statuses_count   &lt;int&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span></a>
<a class="sourceLine" id="cb5-34" title="34"><span class="co">#&gt; $ quoted_location         &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span></a>
<a class="sourceLine" id="cb5-35" title="35"><span class="co">#&gt; $ quoted_description      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span></a>
<a class="sourceLine" id="cb5-36" title="36"><span class="co">#&gt; $ quoted_verified         &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TR...</span></a>
<a class="sourceLine" id="cb5-37" title="37"><span class="co">#&gt; $ retweet_status_id       &lt;chr&gt; NA, "1193156780320120832", "1193181858...</span></a>
<a class="sourceLine" id="cb5-38" title="38"><span class="co">#&gt; $ retweet_text            &lt;chr&gt; NA, "&lt;U+0E19&gt;&lt;U+0E35&gt;&lt;U+0E48&gt;&lt;U+0E04&gt;&lt;U+0E37&gt;&lt;U+0E2D&gt;&lt;U+0E20&gt;&lt;U+0E32&gt;&lt;U+0E1E&gt;&lt;U+0E2B&gt;&lt;U+0E19&gt;&lt;U+0E36&gt;&lt;U+0E48&gt;&lt;U+0E07&gt;&lt;U+0E43&gt;&lt;U+0E19&gt; Concept art &lt;U+0E41&gt;&lt;U+0E23&gt;&lt;U+0E01&gt;&lt;U+0E40&gt;...</span></a>
<a class="sourceLine" id="cb5-39" title="39"><span class="co">#&gt; $ retweet_created_at      &lt;dttm&gt; NA, 2019-11-09 13:21:58, 2019-11-09 1...</span></a>
<a class="sourceLine" id="cb5-40" title="40"><span class="co">#&gt; $ retweet_source          &lt;chr&gt; NA, "&lt;a href=\"http://twitter.com/down...</span></a>
<a class="sourceLine" id="cb5-41" title="41"><span class="co">#&gt; $ retweet_favorite_count  &lt;int&gt; NA, 1599, 2, 7, 93, 56, 36149, 2, 9273...</span></a>
<a class="sourceLine" id="cb5-42" title="42"><span class="co">#&gt; $ retweet_retweet_count   &lt;int&gt; NA, 4443, 2, 3, 39, 53, 10051, 26, 335...</span></a>
<a class="sourceLine" id="cb5-43" title="43"><span class="co">#&gt; $ retweet_user_id         &lt;chr&gt; NA, "2274558024", "338255654", "102969...</span></a>
<a class="sourceLine" id="cb5-44" title="44"><span class="co">#&gt; $ retweet_screen_name     &lt;chr&gt; NA, "arielqueenss", "cdzonanorte", "sh...</span></a>
<a class="sourceLine" id="cb5-45" title="45"><span class="co">#&gt; $ retweet_name            &lt;chr&gt; NA, "— \U0001d4d0\U0001d4fb\U0001d4f2\...</span></a>
<a class="sourceLine" id="cb5-46" title="46"><span class="co">#&gt; $ retweet_followers_count &lt;int&gt; NA, 22733, 988, 434, 7839, 4117, 16487...</span></a>
<a class="sourceLine" id="cb5-47" title="47"><span class="co">#&gt; $ retweet_friends_count   &lt;int&gt; NA, 22733, 988, 434, 7839, 4117, 16487...</span></a>
<a class="sourceLine" id="cb5-48" title="48"><span class="co">#&gt; $ retweet_statuses_count  &lt;int&gt; NA, 32565, 2357, 6267, 366, 249094, 60...</span></a>
<a class="sourceLine" id="cb5-49" title="49"><span class="co">#&gt; $ retweet_location        &lt;chr&gt; NA, "&lt;U+0E01&gt;&lt;U+0E23&gt;&lt;U+0E38&gt;&lt;U+0E07&gt;&lt;U+0E40&gt;&lt;U+0E17&gt;&lt;U+0E1E&gt;&lt;U+0E21&gt;&lt;U+0E2B&gt;&lt;U+0E32&gt;&lt;U+0E19&gt;&lt;U+0E04&gt;&lt;U+0E23&gt;, &lt;U+0E1B&gt;&lt;U+0E23&gt;&lt;U+0E30&gt;&lt;U+0E40&gt;&lt;U+0E17&gt;&lt;U+0E28&gt;&lt;U+0E44&gt;&lt;U+0E17&gt;&lt;U+0E22&gt;", "Ávila...</span></a>
<a class="sourceLine" id="cb5-50" title="50"><span class="co">#&gt; $ retweet_description     &lt;chr&gt; NA, "stan MARVEL &amp; DISNEY &amp; QUEEN &amp; BE...</span></a>
<a class="sourceLine" id="cb5-51" title="51"><span class="co">#&gt; $ retweet_verified        &lt;lgl&gt; TRUE, FALSE, FALSE, FALSE, FALSE, FALS...</span></a>
<a class="sourceLine" id="cb5-52" title="52"><span class="co">#&gt; $ place_url               &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span></a>
<a class="sourceLine" id="cb5-53" title="53"><span class="co">#&gt; $ place_name              &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span></a>
<a class="sourceLine" id="cb5-54" title="54"><span class="co">#&gt; $ place_full_name         &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span></a>
<a class="sourceLine" id="cb5-55" title="55"><span class="co">#&gt; $ place_type              &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span></a>
<a class="sourceLine" id="cb5-56" title="56"><span class="co">#&gt; $ country                 &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span></a>
<a class="sourceLine" id="cb5-57" title="57"><span class="co">#&gt; $ country_code            &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span></a>
<a class="sourceLine" id="cb5-58" title="58"><span class="co">#&gt; $ bbox_coords             &lt;list&gt; [&lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, ...</span></a>
<a class="sourceLine" id="cb5-59" title="59"><span class="co">#&gt; $ retweet_place_url       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span></a>
<a class="sourceLine" id="cb5-60" title="60"><span class="co">#&gt; $ retweet_place_name      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span></a>
<a class="sourceLine" id="cb5-61" title="61"><span class="co">#&gt; $ retweet_place_full_name &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span></a>
<a class="sourceLine" id="cb5-62" title="62"><span class="co">#&gt; $ retweet_place_type      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span></a>
<a class="sourceLine" id="cb5-63" title="63"><span class="co">#&gt; $ retweet_country         &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span></a>
<a class="sourceLine" id="cb5-64" title="64"><span class="co">#&gt; $ retweet_country_code    &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span></a>
<a class="sourceLine" id="cb5-65" title="65"><span class="co">#&gt; $ retweet_bbox_coords     &lt;list&gt; [&lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, ...</span></a>
<a class="sourceLine" id="cb5-66" title="66"><span class="co">#&gt; $ quoted_place_url        &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span></a>
<a class="sourceLine" id="cb5-67" title="67"><span class="co">#&gt; $ quoted_place_name       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span></a>
<a class="sourceLine" id="cb5-68" title="68"><span class="co">#&gt; $ quoted_place_full_name  &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span></a>
<a class="sourceLine" id="cb5-69" title="69"><span class="co">#&gt; $ quoted_place_type       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span></a>
<a class="sourceLine" id="cb5-70" title="70"><span class="co">#&gt; $ quoted_country          &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span></a>
<a class="sourceLine" id="cb5-71" title="71"><span class="co">#&gt; $ quoted_country_code     &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span></a>
<a class="sourceLine" id="cb5-72" title="72"><span class="co">#&gt; $ quoted_bbox_coords      &lt;list&gt; [&lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, ...</span></a>
<a class="sourceLine" id="cb5-73" title="73"><span class="co">#&gt; $ name                    &lt;chr&gt; "SunDae FINALLY \U0001f47c\U0001f3fb\U...</span></a>
<a class="sourceLine" id="cb5-74" title="74"><span class="co">#&gt; $ location                &lt;chr&gt; NA, "&lt;U+0E2D&gt;.&lt;U+0E40&gt;&lt;U+0E21&gt;&lt;U+0E37&gt;&lt;U+0E2D&gt;&lt;U+0E07&gt;&lt;U+0E1E&gt;&lt;U+0E30&gt;&lt;U+0E40&gt;&lt;U+0E22&gt;&lt;U+0E32&gt;, &lt;U+0E08&gt;.&lt;U+0E1E&gt;&lt;U+0E30&gt;&lt;U+0E40&gt;&lt;U+0E22&gt;&lt;U+0E32&gt;", NA, "&lt;U+0432&gt; &lt;U+0433&gt;&lt;U+0440&gt;...</span></a>
<a class="sourceLine" id="cb5-75" title="75"><span class="co">#&gt; $ description             &lt;chr&gt; "your clown wig is falling honey #D1 u...</span></a>
<a class="sourceLine" id="cb5-76" title="76"><span class="co">#&gt; $ url                     &lt;chr&gt; NA, NA, NA, "https://ficbook.net/autho...</span></a>
<a class="sourceLine" id="cb5-77" title="77"><span class="co">#&gt; $ protected               &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FAL...</span></a>
<a class="sourceLine" id="cb5-78" title="78"><span class="co">#&gt; $ followers_count         &lt;int&gt; 20, 161, 44, 705, 8, 853, 149, 105029,...</span></a>
<a class="sourceLine" id="cb5-79" title="79"><span class="co">#&gt; $ friends_count           &lt;int&gt; 91, 305, 112, 613, 499, 2568, 621, 637...</span></a>
<a class="sourceLine" id="cb5-80" title="80"><span class="co">#&gt; $ listed_count            &lt;int&gt; 0, 1, 0, 11, 0, 9, 1, 156, 0, 1, 65, 0...</span></a>
<a class="sourceLine" id="cb5-81" title="81"><span class="co">#&gt; $ statuses_count          &lt;int&gt; 1728, 70480, 618, 57420, 261, 71345, 2...</span></a>
<a class="sourceLine" id="cb5-82" title="82"><span class="co">#&gt; $ favourites_count        &lt;int&gt; 231, 2847, 931, 125861, 2, 4047, 22457...</span></a>
<a class="sourceLine" id="cb5-83" title="83"><span class="co">#&gt; $ account_created_at      &lt;dttm&gt; 2019-10-24 06:50:37, 2014-12-28 13:10...</span></a>
<a class="sourceLine" id="cb5-84" title="84"><span class="co">#&gt; $ verified                &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FAL...</span></a>
<a class="sourceLine" id="cb5-85" title="85"><span class="co">#&gt; $ account_lang            &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span></a>
<a class="sourceLine" id="cb5-86" title="86"><span class="co">#&gt; $ profile_banner_url      &lt;chr&gt; "https://pbs.twimg.com/profile_banners...</span></a>
<a class="sourceLine" id="cb5-87" title="87"><span class="co">#&gt; $ profile_image_url       &lt;chr&gt; "http://pbs.twimg.com/profile_images/1...</span></a>
<a class="sourceLine" id="cb5-88" title="88"><span class="co">#&gt; $ timestamp_ms            &lt;dttm&gt; 2019-11-09 20:10:31, 2019-11-09 20:10...</span></a>
<a class="sourceLine" id="cb5-89" title="89"><span class="co">#&gt; $ contributors_enabled    &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TR...</span></a></code></pre></div>
</div>
<div id="scaling-up" class="section level2">
<h2 class="hasAnchor">
<a href="#scaling-up" class="anchor"></a>Scaling Up</h2>
<p>We’re more interested in handling much larger data sets, like this one that was also obtained using <code><a href="https://rdrr.io/pkg/rtweet/man/stream_tweets.html">rtweet::stream_tweets()</a></code>. The file has been compressed to an 18 Mb .gz file (153 Mb uncompressed).</p>
<p>Currently, <code>{rtweet}</code> may fail parsing streams because the data returned may not be valid JSON.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">rtweet_stream_path &lt;-<span class="st"> "inst/example-data/api-stream.json.gz"</span></a>
<a class="sourceLine" id="cb6-2" title="2"></a>
<a class="sourceLine" id="cb6-3" title="3">rtweet<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/rtweet/man/parse_stream.html">parse_stream</a></span>(rtweet_stream_path)</a></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="co">#&gt; Error: parse error: after array element, I expect ',' or ']'</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="co">#&gt;           736405012481"},"timestamp_ms":"1569693801061"}}{"created_at"</span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="co">#&gt;                      (right here) ------^</span></a></code></pre></div>
<p>This is unfortunate because I originally wanted to compare benchmarks since <code>{tweetio}</code> can handle these situations.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">big_rtweet_stream &lt;-<span class="st"> </span><span class="kw"><a href="reference/read_tweets.html">read_tweets</a></span>(rtweet_stream_path)</a></code></pre></div>
<p>How long does that take?</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(microbenchmark)</a>
<a class="sourceLine" id="cb9-2" title="2"></a>
<a class="sourceLine" id="cb9-3" title="3">big_rtweet_time &lt;-<span class="st"> </span><span class="kw">microbenchmark</span>(</a>
<a class="sourceLine" id="cb9-4" title="4">  <span class="kw"><a href="reference/read_tweets.html">read_tweets</a></span>(rtweet_stream_path),</a>
<a class="sourceLine" id="cb9-5" title="5">  <span class="dt">times =</span> <span class="dv">3</span></a>
<a class="sourceLine" id="cb9-6" title="6">)</a>
<a class="sourceLine" id="cb9-7" title="7"></a>
<a class="sourceLine" id="cb9-8" title="8">big_rtweet_time</a></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"><span class="co">#&gt; Unit: seconds</span></a>
<a class="sourceLine" id="cb10-2" title="2"><span class="co">#&gt;                             expr      min       lq    mean   median</span></a>
<a class="sourceLine" id="cb10-3" title="3"><span class="co">#&gt;  read_tweets(rtweet_stream_path) 2.919488 2.952622 3.01839 2.985756</span></a>
<a class="sourceLine" id="cb10-4" title="4"><span class="co">#&gt;        uq      max neval</span></a>
<a class="sourceLine" id="cb10-5" title="5"><span class="co">#&gt;  3.067841 3.149925     3</span></a></code></pre></div>
</div>
<div id="data-dumps" class="section level2">
<h2 class="hasAnchor">
<a href="#data-dumps" class="anchor"></a>Data Dumps</h2>
<p>Using Elasticsearch seems to be the most common practice for handling social media data at scale, but it’s (unfortunately) possible that you’ll need to work with data dumps.</p>
<p>The data collected from APIs are stored inside a nested JSON object named <code>"doc"</code>. <code>"doc"</code> is typically embedded in a ton of system metadata, most of which you probably don’t care about.</p>
<p>I’ve encountered two flavors of these schema:</p>
<ol>
<li>.jsonl: line-delimited JSON (which is nearly the same as NDJSON).</li>
<li>.json: the complete contents of an Elasticsearch index, which is a JSON array.</li>
</ol>
<p>The .jsonl structure looks something like this:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb11-1" title="1"><span class="fu">{</span><span class="dt">"system_metadata_you_dont_care_about"</span><span class="fu">:</span><span class="st">"blahblahblah"</span><span class="fu">,</span><span class="dt">"more_metadata1"</span><span class="fu">:</span><span class="st">"blahblahblah"</span><span class="fu">,</span><span class="dt">"more_metadata2"</span><span class="fu">:</span><span class="st">"blahblahblah"</span><span class="fu">,</span><span class="dt">"more_metadata3"</span><span class="fu">:</span><span class="st">"blahblahblah"</span><span class="fu">,</span><span class="dt">"more_metadata4"</span><span class="fu">:</span><span class="st">"blahblahblah"</span><span class="fu">,</span><span class="dt">"more_metadata5"</span><span class="fu">:</span><span class="st">"blahblahblah"</span><span class="fu">,</span><span class="dt">"doc"</span><span class="fu">:{</span><span class="dt">"text"</span><span class="fu">:</span><span class="st">"********************HERE'S THE DATA YOU ACTUALLY WANT********************"</span><span class="fu">,</span><span class="dt">"id"</span><span class="fu">:</span><span class="dv">92108498098018010401</span><span class="fu">,</span><span class="dt">"id_str"</span><span class="fu">:</span><span class="st">"92108498098018010401"</span><span class="fu">},</span><span class="dt">"more_metadata6"</span><span class="fu">:</span><span class="st">"blahblahblah"</span><span class="fu">,</span><span class="dt">"more_metadata7"</span><span class="fu">:</span><span class="st">"blahblahblah"</span><span class="fu">,</span><span class="dt">"more_metadata8"</span><span class="fu">:</span><span class="st">"blahblahblah"</span><span class="fu">,</span><span class="dt">"more_metadata9"</span><span class="fu">:</span><span class="st">"blahblahblah"</span><span class="fu">,</span><span class="dt">"more_metadata10"</span><span class="fu">:</span><span class="st">"blahblahblah"</span><span class="fu">}</span></a>
<a class="sourceLine" id="cb11-2" title="2"><span class="fu">{</span><span class="dt">"system_metadata_you_dont_care_about"</span><span class="fu">:</span><span class="st">"blahblahblah"</span><span class="fu">,</span><span class="dt">"more_metadata1"</span><span class="fu">:</span><span class="st">"blahblahblah"</span><span class="fu">,</span><span class="dt">"more_metadata2"</span><span class="fu">:</span><span class="st">"blahblahblah"</span><span class="fu">,</span><span class="dt">"more_metadata3"</span><span class="fu">:</span><span class="st">"blahblahblah"</span><span class="fu">,</span><span class="dt">"more_metadata4"</span><span class="fu">:</span><span class="st">"blahblahblah"</span><span class="fu">,</span><span class="dt">"more_metadata5"</span><span class="fu">:</span><span class="st">"blahblahblah"</span><span class="fu">,</span><span class="dt">"doc"</span><span class="fu">:{</span><span class="dt">"text"</span><span class="fu">:</span><span class="st">"********************HERE'S THE DATA YOU ACTUALLY WANT********************"</span><span class="fu">,</span><span class="dt">"id"</span><span class="fu">:</span><span class="dv">92108498098018010401</span><span class="fu">,</span><span class="dt">"id_str"</span><span class="fu">:</span><span class="st">"92108498098018010401"</span><span class="fu">},</span><span class="dt">"more_metadata6"</span><span class="fu">:</span><span class="st">"blahblahblah"</span><span class="fu">,</span><span class="dt">"more_metadata7"</span><span class="fu">:</span><span class="st">"blahblahblah"</span><span class="fu">,</span><span class="dt">"more_metadata8"</span><span class="fu">:</span><span class="st">"blahblahblah"</span><span class="fu">,</span><span class="dt">"more_metadata9"</span><span class="fu">:</span><span class="st">"blahblahblah"</span><span class="fu">,</span><span class="dt">"more_metadata10"</span><span class="fu">:</span><span class="st">"blahblahblah"</span><span class="fu">}</span></a>
<a class="sourceLine" id="cb11-3" title="3"><span class="fu">{</span><span class="dt">"system_metadata_you_dont_care_about"</span><span class="fu">:</span><span class="st">"blahblahblah"</span><span class="fu">,</span><span class="dt">"more_metadata1"</span><span class="fu">:</span><span class="st">"blahblahblah"</span><span class="fu">,</span><span class="dt">"more_metadata2"</span><span class="fu">:</span><span class="st">"blahblahblah"</span><span class="fu">,</span><span class="dt">"more_metadata3"</span><span class="fu">:</span><span class="st">"blahblahblah"</span><span class="fu">,</span><span class="dt">"more_metadata4"</span><span class="fu">:</span><span class="st">"blahblahblah"</span><span class="fu">,</span><span class="dt">"more_metadata5"</span><span class="fu">:</span><span class="st">"blahblahblah"</span><span class="fu">,</span><span class="dt">"doc"</span><span class="fu">:{</span><span class="dt">"text"</span><span class="fu">:</span><span class="st">"********************HERE'S THE DATA YOU ACTUALLY WANT********************"</span><span class="fu">,</span><span class="dt">"id"</span><span class="fu">:</span><span class="dv">92108498098018010401</span><span class="fu">,</span><span class="dt">"id_str"</span><span class="fu">:</span><span class="st">"92108498098018010401"</span><span class="fu">},</span><span class="dt">"more_metadata6"</span><span class="fu">:</span><span class="st">"blahblahblah"</span><span class="fu">,</span><span class="dt">"more_metadata7"</span><span class="fu">:</span><span class="st">"blahblahblah"</span><span class="fu">,</span><span class="dt">"more_metadata8"</span><span class="fu">:</span><span class="st">"blahblahblah"</span><span class="fu">,</span><span class="dt">"more_metadata9"</span><span class="fu">:</span><span class="st">"blahblahblah"</span><span class="fu">,</span><span class="dt">"more_metadata10"</span><span class="fu">:</span><span class="st">"blahblahblah"</span><span class="fu">}</span></a></code></pre></div>
<p>Each line contains a single JSON object resembling the following:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb12-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb12-2" title="2">    <span class="dt">"system_metadata_you_dont_care_about"</span><span class="fu">:</span> <span class="st">"blahblahblah"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb12-3" title="3">    <span class="dt">"more_metadata1"</span><span class="fu">:</span> <span class="st">"blahblahblah"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb12-4" title="4">    <span class="dt">"more_metadata2"</span><span class="fu">:</span> <span class="st">"blahblahblah"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb12-5" title="5">    <span class="dt">"more_metadata3"</span><span class="fu">:</span> <span class="st">"blahblahblah"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb12-6" title="6">    <span class="dt">"more_metadata4"</span><span class="fu">:</span> <span class="st">"blahblahblah"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb12-7" title="7">    <span class="dt">"more_metadata5"</span><span class="fu">:</span> <span class="st">"blahblahblah"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb12-8" title="8">    <span class="dt">"doc"</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb12-9" title="9">        <span class="dt">"text"</span><span class="fu">:</span> <span class="st">"********************HERE'S THE DATA YOU ACTUALLY WANT********************"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb12-10" title="10">        <span class="dt">"id"</span><span class="fu">:</span> <span class="dv">92108498098018010401</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb12-11" title="11">        <span class="dt">"id_str"</span><span class="fu">:</span> <span class="st">"92108498098018010401"</span></a>
<a class="sourceLine" id="cb12-12" title="12">    <span class="fu">},</span></a>
<a class="sourceLine" id="cb12-13" title="13">    <span class="dt">"more_metadata6"</span><span class="fu">:</span> <span class="st">"blahblahblah"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb12-14" title="14">    <span class="dt">"more_metadata7"</span><span class="fu">:</span> <span class="st">"blahblahblah"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb12-15" title="15">    <span class="dt">"more_metadata8"</span><span class="fu">:</span> <span class="st">"blahblahblah"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb12-16" title="16">    <span class="dt">"more_metadata9"</span><span class="fu">:</span> <span class="st">"blahblahblah"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb12-17" title="17">    <span class="dt">"more_metadata10"</span><span class="fu">:</span> <span class="st">"blahblahblah"</span></a>
<a class="sourceLine" id="cb12-18" title="18"><span class="fu">}</span></a></code></pre></div>
<p>And the .json structure looks something like this:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb13-1" title="1"><span class="ot">[</span></a>
<a class="sourceLine" id="cb13-2" title="2">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb13-3" title="3">        <span class="dt">"_id"</span><span class="fu">:</span> <span class="st">"e5daf1467d2438e31b11b44a82cbd7f5758ba5a1f1d3ecbcc6e1fc04dc9c7c4d-3016858092318"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb13-4" title="4">        <span class="dt">"_index"</span><span class="fu">:</span> <span class="st">"org-77f135f331153568ab7eb0e4c24623a7-default-3769a33b9e88598e38317591e2ee31c3-default-030009"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb13-5" title="5">        <span class="dt">"_score"</span><span class="fu">:</span> <span class="kw">null</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb13-6" title="6">        <span class="dt">"_source"</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb13-7" title="7">            <span class="dt">"system_metadata_you_dont_care_about"</span><span class="fu">:</span> <span class="st">"blahblahblah"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb13-8" title="8">            <span class="dt">"more_metadata1"</span><span class="fu">:</span> <span class="st">"blahblahblah"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb13-9" title="9">            <span class="dt">"doc"</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb13-10" title="10">                <span class="dt">"text"</span><span class="fu">:</span> <span class="st">"********************HERE'S THE DATA YOU ACTUALLY WANT********************"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb13-11" title="11">                <span class="dt">"id"</span><span class="fu">:</span> <span class="dv">92108498098018010401</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb13-12" title="12">                <span class="dt">"id_str"</span><span class="fu">:</span> <span class="st">"92108498098018010401"</span></a>
<a class="sourceLine" id="cb13-13" title="13">            <span class="fu">},</span></a>
<a class="sourceLine" id="cb13-14" title="14">            <span class="dt">"more_metadata6"</span><span class="fu">:</span> <span class="st">"blahblahblah"</span></a>
<a class="sourceLine" id="cb13-15" title="15">        <span class="fu">}</span></a>
<a class="sourceLine" id="cb13-16" title="16">    <span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb13-17" title="17">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb13-18" title="18">        <span class="dt">"_id"</span><span class="fu">:</span> <span class="st">"e5daf1467d2438e31b11b44a82cbd7f5758ba5a1f1d3ecbcc6e1fc04dc9c7c4d-3016858092318"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb13-19" title="19">        <span class="dt">"_index"</span><span class="fu">:</span> <span class="st">"org-77f135f331153568ab7eb0e4c24623a7-default-3769a33b9e88598e38317591e2ee31c3-default-030009"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb13-20" title="20">        <span class="dt">"_score"</span><span class="fu">:</span> <span class="kw">null</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb13-21" title="21">        <span class="dt">"_source"</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb13-22" title="22">            <span class="dt">"system_metadata_you_dont_care_about"</span><span class="fu">:</span> <span class="st">"blahblahblah"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb13-23" title="23">            <span class="dt">"more_metadata1"</span><span class="fu">:</span> <span class="st">"blahblahblah"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb13-24" title="24">            <span class="dt">"doc"</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb13-25" title="25">                <span class="dt">"text"</span><span class="fu">:</span> <span class="st">"********************HERE'S THE DATA YOU ACTUALLY WANT********************"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb13-26" title="26">                <span class="dt">"id"</span><span class="fu">:</span> <span class="dv">92108498098018010401</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb13-27" title="27">                <span class="dt">"id_str"</span><span class="fu">:</span> <span class="st">"92108498098018010401"</span></a>
<a class="sourceLine" id="cb13-28" title="28">            <span class="fu">},</span></a>
<a class="sourceLine" id="cb13-29" title="29">            <span class="dt">"more_metadata6"</span><span class="fu">:</span> <span class="st">"blahblahblah"</span></a>
<a class="sourceLine" id="cb13-30" title="30">        <span class="fu">}</span></a>
<a class="sourceLine" id="cb13-31" title="31">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb13-32" title="32"><span class="ot">]</span></a></code></pre></div>
<p>This has three unfortunate consequences:</p>
<ol>
<li>Packages that were purpose-built to work directly with <code>{rtweet}</code>’s data frames can’t play along with your data.</li>
<li>You’re going to waste most of your time (and memory) getting data into R that you’re not going to use.</li>
<li>The data are <em>very</em> tedious to restructure in R (lists of lists of lists of lists of lists…).</li>
</ol>
<p><code>{tweetio}</code> solves this by parsing everything at the C++ level, but only returning the actual tweet data to R.</p>
<p>Here’s a benchmark for reading a 890 Mb JSON array data dump.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1">res &lt;-<span class="st"> </span><span class="kw">microbenchmark</span>(</a>
<a class="sourceLine" id="cb14-2" title="2"></a>
<a class="sourceLine" id="cb14-3" title="3">  <span class="kw"><a href="reference/read_tweets.html">read_tweets</a></span>(data_dump) <span class="co"># *****************************************************</span></a>
<a class="sourceLine" id="cb14-4" title="4">  </a>
<a class="sourceLine" id="cb14-5" title="5">  , <span class="dt">times =</span> <span class="dv">3</span></a>
<a class="sourceLine" id="cb14-6" title="6">)</a>
<a class="sourceLine" id="cb14-7" title="7"></a>
<a class="sourceLine" id="cb14-8" title="8">res</a></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1"><span class="co">#&gt; Unit: seconds</span></a>
<a class="sourceLine" id="cb15-2" title="2"><span class="co">#&gt;                    expr      min       lq     mean   median       uq</span></a>
<a class="sourceLine" id="cb15-3" title="3"><span class="co">#&gt;  read_tweets(data_dump) 4.771901 4.972242 5.171449 5.172584 5.371223</span></a>
<a class="sourceLine" id="cb15-4" title="4"><span class="co">#&gt;       max neval</span></a>
<a class="sourceLine" id="cb15-5" title="5"><span class="co">#&gt;  5.569862     3</span></a></code></pre></div>
</div>
</div>
<div id="spatial-tweets" class="section level1">
<h1 class="hasAnchor">
<a href="#spatial-tweets" class="anchor"></a>Spatial Tweets</h1>
<p>Tweet JSON contains an object called <code>"place"</code> that is set aside for location information. If present, it looks something like the following.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb16-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb16-2" title="2">    <span class="dt">"text"</span><span class="fu">:</span> <span class="st">"#rstats4lyfe"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb16-3" title="3">    <span class="dt">"place"</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb16-4" title="4">      <span class="dt">"id"</span><span class="fu">:</span> <span class="st">"00d546b224a6764d"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb16-5" title="5">      <span class="dt">"url"</span><span class="fu">:</span> <span class="st">"https://api.twitter.com/1.1/geo/id/blahblah.json"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb16-6" title="6">      <span class="dt">"place_type"</span><span class="fu">:</span> <span class="st">"city"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb16-7" title="7">      <span class="dt">"name"</span><span class="fu">:</span> <span class="st">"General Pico"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb16-8" title="8">      <span class="dt">"full_name"</span><span class="fu">:</span> <span class="st">"General Pico, Argentina"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb16-9" title="9">      <span class="dt">"country_code"</span><span class="fu">:</span> <span class="st">"AR"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb16-10" title="10">      <span class="dt">"country"</span><span class="fu">:</span> <span class="st">"Argentina"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb16-11" title="11">      <span class="dt">"bounding_box"</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb16-12" title="12">          <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"Polygon"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb16-13" title="13">          <span class="dt">"coordinates"</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb16-14" title="14">              <span class="ot">[</span></a>
<a class="sourceLine" id="cb16-15" title="15">                  <span class="ot">[</span></a>
<a class="sourceLine" id="cb16-16" title="16">                      <span class="fl">-63.784544</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb16-17" title="17">                      <span class="fl">-35.689402</span></a>
<a class="sourceLine" id="cb16-18" title="18">                  <span class="ot">],</span></a>
<a class="sourceLine" id="cb16-19" title="19">                  <span class="ot">[</span></a>
<a class="sourceLine" id="cb16-20" title="20">                      <span class="fl">-63.784544</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb16-21" title="21">                      <span class="fl">-35.641737</span></a>
<a class="sourceLine" id="cb16-22" title="22">                  <span class="ot">],</span></a>
<a class="sourceLine" id="cb16-23" title="23">                  <span class="ot">[</span></a>
<a class="sourceLine" id="cb16-24" title="24">                      <span class="fl">-63.724717</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb16-25" title="25">                      <span class="fl">-35.641737</span></a>
<a class="sourceLine" id="cb16-26" title="26">                  <span class="ot">],</span></a>
<a class="sourceLine" id="cb16-27" title="27">                  <span class="ot">[</span></a>
<a class="sourceLine" id="cb16-28" title="28">                      <span class="fl">-63.724717</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb16-29" title="29">                      <span class="fl">-35.689402</span></a>
<a class="sourceLine" id="cb16-30" title="30">                  <span class="ot">]</span></a>
<a class="sourceLine" id="cb16-31" title="31">              <span class="ot">]</span></a>
<a class="sourceLine" id="cb16-32" title="32">          <span class="ot">]</span></a>
<a class="sourceLine" id="cb16-33" title="33">      <span class="fu">},</span></a>
<a class="sourceLine" id="cb16-34" title="34">      <span class="dt">"attributes"</span><span class="fu">:</span> <span class="fu">{}</span></a>
<a class="sourceLine" id="cb16-35" title="35">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb16-36" title="36"><span class="fu">}</span></a></code></pre></div>
<p>In <code>{rtweet}</code>-style data frames, this corresponds to the <code>bbox_coords</code> column.</p>
<p>If you have <code>{sf}</code> installed, you can use <code><a href="reference/as_tweet_sf.html">as_tweet_sf()</a></code> to filter the tweets for those that contain valid coordinates and build their bounding box polygons.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" title="1">tweet_sf &lt;-<span class="st"> </span><span class="kw"><a href="reference/as_tweet_sf.html">as_tweet_sf</a></span>(<span class="dt">tweet_df =</span> big_rtweet_stream) </a>
<a class="sourceLine" id="cb17-2" title="2"></a>
<a class="sourceLine" id="cb17-3" title="3">tweet_sf[, <span class="st">"geometry"</span>]</a></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1"><span class="co">#&gt; Simple feature collection with 321 features and 0 fields</span></a>
<a class="sourceLine" id="cb18-2" title="2"><span class="co">#&gt; geometry type:  POLYGON</span></a>
<a class="sourceLine" id="cb18-3" title="3"><span class="co">#&gt; dimension:      XY</span></a>
<a class="sourceLine" id="cb18-4" title="4"><span class="co">#&gt; bbox:           xmin: -157.9505 ymin: -55.11686 xmax: 139.7527 ymax: 56.50253</span></a>
<a class="sourceLine" id="cb18-5" title="5"><span class="co">#&gt; epsg (SRID):    4326</span></a>
<a class="sourceLine" id="cb18-6" title="6"><span class="co">#&gt; proj4string:    +proj=longlat +datum=WGS84 +no_defs</span></a>
<a class="sourceLine" id="cb18-7" title="7"><span class="co">#&gt; # A tibble: 321 x 1</span></a>
<a class="sourceLine" id="cb18-8" title="8"><span class="co">#&gt;                                                                    geometry</span></a>
<a class="sourceLine" id="cb18-9" title="9"><span class="co">#&gt;                                                               &lt;POLYGON [°]&gt;</span></a>
<a class="sourceLine" id="cb18-10" title="10"><span class="co">#&gt;  1 ((-97.51982 35.15327, -97.51982 35.29133, -97.37053 35.29133, -97.37053~</span></a>
<a class="sourceLine" id="cb18-11" title="11"><span class="co">#&gt;  2 ((8.665852 44.37908, 8.665852 44.51991, 9.095838 44.51991, 9.095838 44.~</span></a>
<a class="sourceLine" id="cb18-12" title="12"><span class="co">#&gt;  3 ((-106.9506 31.12068, -106.9506 31.78387, -106.1854 31.78387, -106.1854~</span></a>
<a class="sourceLine" id="cb18-13" title="13"><span class="co">#&gt;  4 ((-63.39386 -41.03501, -63.39386 -33.26014, -56.66584 -33.26014, -56.66~</span></a>
<a class="sourceLine" id="cb18-14" title="14"><span class="co">#&gt;  5 ((30.42998 39.76794, 30.42998 39.80569, 30.55928 39.80569, 30.55928 39.~</span></a>
<a class="sourceLine" id="cb18-15" title="15"><span class="co">#&gt;  6 ((-118.6684 33.70454, -118.6684 34.33704, -118.1554 34.33704, -118.1554~</span></a>
<a class="sourceLine" id="cb18-16" title="16"><span class="co">#&gt;  7 ((139.136 36.24259, 139.136 36.4086, 139.2828 36.4086, 139.2828 36.2425~</span></a>
<a class="sourceLine" id="cb18-17" title="17"><span class="co">#&gt;  8 ((135.5633 34.68448, 135.5633 34.7202, 135.6046 34.7202, 135.6046 34.68~</span></a>
<a class="sourceLine" id="cb18-18" title="18"><span class="co">#&gt;  9 ((-119.0618 34.12687, -119.0618 34.25008, -118.776 34.25008, -118.776 3~</span></a>
<a class="sourceLine" id="cb18-19" title="19"><span class="co">#&gt; 10 ((-63.78454 -35.6894, -63.78454 -35.64174, -63.72472 -35.64174, -63.724~</span></a>
<a class="sourceLine" id="cb18-20" title="20"><span class="co">#&gt; # ... with 311 more rows</span></a></code></pre></div>
<p>If <code>tibble_sf = TRUE</code> (the default) and <code>{tibble}</code> is installed, the returned <code>sf</code> object will carry the <code>tibble</code> class.</p>
<p>There are currently three columns that can potentially hold bounding boxes:</p>
<ol>
<li><code>bbox_coords</code></li>
<li><code>quoted_bbox_coords</code></li>
<li><code>retweet_bbox_coords</code></li>
</ol>
<p>You can select which one to use to build your <code>sf</code> object by modifying the <code>geom_col=</code> parameter (default: <code>"bbox_coords"</code>)</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" title="1"><span class="kw"><a href="reference/as_tweet_sf.html">as_tweet_sf</a></span>(big_rtweet_stream, <span class="dt">geom_col =</span> <span class="st">"quoted_bbox_coords"</span></a>
<a class="sourceLine" id="cb19-2" title="2">            )[, <span class="st">"geometry"</span>]</a></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" title="1"><span class="co">#&gt; Simple feature collection with 76 features and 0 fields</span></a>
<a class="sourceLine" id="cb20-2" title="2"><span class="co">#&gt; geometry type:  POLYGON</span></a>
<a class="sourceLine" id="cb20-3" title="3"><span class="co">#&gt; dimension:      XY</span></a>
<a class="sourceLine" id="cb20-4" title="4"><span class="co">#&gt; bbox:           xmin: -122.2878 ymin: -34.99874 xmax: 100.632 ymax: 54.43848</span></a>
<a class="sourceLine" id="cb20-5" title="5"><span class="co">#&gt; epsg (SRID):    4326</span></a>
<a class="sourceLine" id="cb20-6" title="6"><span class="co">#&gt; proj4string:    +proj=longlat +datum=WGS84 +no_defs</span></a>
<a class="sourceLine" id="cb20-7" title="7"><span class="co">#&gt; # A tibble: 76 x 1</span></a>
<a class="sourceLine" id="cb20-8" title="8"><span class="co">#&gt;                                                                    geometry</span></a>
<a class="sourceLine" id="cb20-9" title="9"><span class="co">#&gt;                                                               &lt;POLYGON [°]&gt;</span></a>
<a class="sourceLine" id="cb20-10" title="10"><span class="co">#&gt;  1 ((2.665436 4.197406, 2.665436 13.88812, 14.67779 13.88812, 14.67779 4.1~</span></a>
<a class="sourceLine" id="cb20-11" title="11"><span class="co">#&gt;  2 ((100.5864 13.99565, 100.5864 14.09199, 100.632 14.09199, 100.632 13.99~</span></a>
<a class="sourceLine" id="cb20-12" title="12"><span class="co">#&gt;  3 ((0.010398 51.54382, 0.010398 51.62617, 0.147328 51.62617, 0.147328 51.~</span></a>
<a class="sourceLine" id="cb20-13" title="13"><span class="co">#&gt;  4 ((-6.387438 53.29874, -6.387438 53.41106, -6.107805 53.41106, -6.107805~</span></a>
<a class="sourceLine" id="cb20-14" title="14"><span class="co">#&gt;  5 ((-73.99148 -33.75105, -73.99148 5.27192, -32.37819 5.27192, -32.37819 ~</span></a>
<a class="sourceLine" id="cb20-15" title="15"><span class="co">#&gt;  6 ((-89.57151 36.49713, -89.57151 39.14736, -81.96497 39.14736, -81.96497~</span></a>
<a class="sourceLine" id="cb20-16" title="16"><span class="co">#&gt;  7 ((-87.03154 33.29557, -87.03154 33.45665, -86.89743 33.45665, -86.89743~</span></a>
<a class="sourceLine" id="cb20-17" title="17"><span class="co">#&gt;  8 ((-90.13791 29.88957, -90.13791 30.07563, -89.88411 30.07563, -89.88411~</span></a>
<a class="sourceLine" id="cb20-18" title="18"><span class="co">#&gt;  9 ((16.44759 -34.83425, 16.44759 -22.12472, 32.89229 -22.12472, 32.89229 ~</span></a>
<a class="sourceLine" id="cb20-19" title="19"><span class="co">#&gt; 10 ((-122.2878 37.9688, -122.2878 37.9688, -122.2878 37.9688, -122.2878 37~</span></a>
<a class="sourceLine" id="cb20-20" title="20"><span class="co">#&gt; # ... with 66 more rows</span></a></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" title="1"><span class="kw"><a href="reference/as_tweet_sf.html">as_tweet_sf</a></span>(big_rtweet_stream, <span class="dt">geom_col =</span> <span class="st">"retweet_bbox_coords"</span></a>
<a class="sourceLine" id="cb21-2" title="2">            )[, <span class="st">"geometry"</span>]</a></code></pre></div>
<div class="sourceCode" id="cb22"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" title="1"><span class="co">#&gt; Simple feature collection with 288 features and 0 fields</span></a>
<a class="sourceLine" id="cb22-2" title="2"><span class="co">#&gt; geometry type:  POLYGON</span></a>
<a class="sourceLine" id="cb22-3" title="3"><span class="co">#&gt; dimension:      XY</span></a>
<a class="sourceLine" id="cb22-4" title="4"><span class="co">#&gt; bbox:           xmin: -124.7035 ymin: -54.64819 xmax: 171.1442 ymax: 63.99495</span></a>
<a class="sourceLine" id="cb22-5" title="5"><span class="co">#&gt; epsg (SRID):    4326</span></a>
<a class="sourceLine" id="cb22-6" title="6"><span class="co">#&gt; proj4string:    +proj=longlat +datum=WGS84 +no_defs</span></a>
<a class="sourceLine" id="cb22-7" title="7"><span class="co">#&gt; # A tibble: 288 x 1</span></a>
<a class="sourceLine" id="cb22-8" title="8"><span class="co">#&gt;                                                                    geometry</span></a>
<a class="sourceLine" id="cb22-9" title="9"><span class="co">#&gt;                                                               &lt;POLYGON [°]&gt;</span></a>
<a class="sourceLine" id="cb22-10" title="10"><span class="co">#&gt;  1 ((-70.63769 -33.44997, -70.63769 -33.409, -70.58383 -33.409, -70.58383 ~</span></a>
<a class="sourceLine" id="cb22-11" title="11"><span class="co">#&gt;  2 ((-80.51985 39.7198, -80.51985 42.51607, -74.68952 42.51607, -74.68952 ~</span></a>
<a class="sourceLine" id="cb22-12" title="12"><span class="co">#&gt;  3 ((92.21025 6.760443, 92.21025 13.6849, 94.27577 13.6849, 94.27577 6.760~</span></a>
<a class="sourceLine" id="cb22-13" title="13"><span class="co">#&gt;  4 ((0.010398 51.54382, 0.010398 51.62617, 0.147328 51.62617, 0.147328 51.~</span></a>
<a class="sourceLine" id="cb22-14" title="14"><span class="co">#&gt;  5 ((46.3044 24.33207, 46.3044 25.11182, 47.06576 25.11182, 47.06576 24.33~</span></a>
<a class="sourceLine" id="cb22-15" title="15"><span class="co">#&gt;  6 ((-115.3841 36.12946, -115.3841 36.33637, -115.0622 36.33637, -115.0622~</span></a>
<a class="sourceLine" id="cb22-16" title="16"><span class="co">#&gt;  7 ((-82.66356 34.77603, -82.66356 34.89144, -82.47644 34.89144, -82.47644~</span></a>
<a class="sourceLine" id="cb22-17" title="17"><span class="co">#&gt;  8 ((-122.7792 38.39678, -122.7792 38.50766, -122.573 38.50766, -122.573 3~</span></a>
<a class="sourceLine" id="cb22-18" title="18"><span class="co">#&gt;  9 ((80.12507 26.17718, 80.12507 26.63457, 80.56706 26.63457, 80.56706 26.~</span></a>
<a class="sourceLine" id="cb22-19" title="19"><span class="co">#&gt; 10 ((-46.56728 -23.81592, -46.56728 -23.60562, -46.27811 -23.60562, -46.27~</span></a>
<a class="sourceLine" id="cb22-20" title="20"><span class="co">#&gt; # ... with 278 more rows</span></a></code></pre></div>
<p>You can also build <em>all</em> the supported bounding boxes by setting <code>geom_col=</code> to <code>"all"</code>.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" title="1">all_bboxes &lt;-<span class="st"> </span><span class="kw"><a href="reference/as_tweet_sf.html">as_tweet_sf</a></span>(big_rtweet_stream, <span class="dt">geom_col =</span> <span class="st">"all"</span>)</a>
<a class="sourceLine" id="cb23-2" title="2">all_bboxes[, <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"geometry"</span>, <span class="st">"which_geom"</span>)]</a></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" title="1"><span class="co">#&gt; Simple feature collection with 685 features and 1 field</span></a>
<a class="sourceLine" id="cb24-2" title="2"><span class="co">#&gt; geometry type:  POLYGON</span></a>
<a class="sourceLine" id="cb24-3" title="3"><span class="co">#&gt; dimension:      XY</span></a>
<a class="sourceLine" id="cb24-4" title="4"><span class="co">#&gt; bbox:           xmin: -157.9505 ymin: -55.11686 xmax: 171.1442 ymax: 63.99495</span></a>
<a class="sourceLine" id="cb24-5" title="5"><span class="co">#&gt; epsg (SRID):    4326</span></a>
<a class="sourceLine" id="cb24-6" title="6"><span class="co">#&gt; proj4string:    +proj=longlat +datum=WGS84 +no_defs</span></a>
<a class="sourceLine" id="cb24-7" title="7"><span class="co">#&gt; # A tibble: 685 x 2</span></a>
<a class="sourceLine" id="cb24-8" title="8"><span class="co">#&gt;                                                         geometry which_geom</span></a>
<a class="sourceLine" id="cb24-9" title="9"><span class="co">#&gt;                                                    &lt;POLYGON [°]&gt; &lt;chr&gt;     </span></a>
<a class="sourceLine" id="cb24-10" title="10"><span class="co">#&gt;  1 ((-97.51982 35.15327, -97.51982 35.29133, -97.37053 35.29133~ bbox_coor~</span></a>
<a class="sourceLine" id="cb24-11" title="11"><span class="co">#&gt;  2 ((8.665852 44.37908, 8.665852 44.51991, 9.095838 44.51991, 9~ bbox_coor~</span></a>
<a class="sourceLine" id="cb24-12" title="12"><span class="co">#&gt;  3 ((-106.9506 31.12068, -106.9506 31.78387, -106.1854 31.78387~ bbox_coor~</span></a>
<a class="sourceLine" id="cb24-13" title="13"><span class="co">#&gt;  4 ((-63.39386 -41.03501, -63.39386 -33.26014, -56.66584 -33.26~ bbox_coor~</span></a>
<a class="sourceLine" id="cb24-14" title="14"><span class="co">#&gt;  5 ((30.42998 39.76794, 30.42998 39.80569, 30.55928 39.80569, 3~ bbox_coor~</span></a>
<a class="sourceLine" id="cb24-15" title="15"><span class="co">#&gt;  6 ((-118.6684 33.70454, -118.6684 34.33704, -118.1554 34.33704~ bbox_coor~</span></a>
<a class="sourceLine" id="cb24-16" title="16"><span class="co">#&gt;  7 ((139.136 36.24259, 139.136 36.4086, 139.2828 36.4086, 139.2~ bbox_coor~</span></a>
<a class="sourceLine" id="cb24-17" title="17"><span class="co">#&gt;  8 ((135.5633 34.68448, 135.5633 34.7202, 135.6046 34.7202, 135~ bbox_coor~</span></a>
<a class="sourceLine" id="cb24-18" title="18"><span class="co">#&gt;  9 ((-119.0618 34.12687, -119.0618 34.25008, -118.776 34.25008,~ bbox_coor~</span></a>
<a class="sourceLine" id="cb24-19" title="19"><span class="co">#&gt; 10 ((-63.78454 -35.6894, -63.78454 -35.64174, -63.72472 -35.641~ bbox_coor~</span></a>
<a class="sourceLine" id="cb24-20" title="20"><span class="co">#&gt; # ... with 675 more rows</span></a></code></pre></div>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/unique.html">unique</a></span>(all_bboxes<span class="op">$</span>which_geom)</a></code></pre></div>
<div class="sourceCode" id="cb26"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" title="1"><span class="co">#&gt; [1] "bbox_coords"         "quoted_bbox_coords"  "retweet_bbox_coords"</span></a></code></pre></div>
<p>From there, you can easily manipulate the data like any other <code>{sf}</code> object.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(leaflet)</a>
<a class="sourceLine" id="cb27-2" title="2"></a>
<a class="sourceLine" id="cb27-3" title="3">tweet_sf <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb27-4" title="4"><span class="st">  </span><span class="kw">leaflet</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb27-5" title="5"><span class="st">  </span><span class="kw">addTiles</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb27-6" title="6"><span class="st">  </span><span class="kw">addPolygons</span>()</a></code></pre></div>
<p><img src="reference/figures/unnamed-chunk-17-1.png" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ggplot2)</a>
<a class="sourceLine" id="cb28-2" title="2"></a>
<a class="sourceLine" id="cb28-3" title="3">world &lt;-<span class="st"> </span>rnaturalearth<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/rnaturalearth/man/ne_countries.html">ne_countries</a></span>(<span class="dt">returnclass =</span> <span class="st">"sf"</span>)</a>
<a class="sourceLine" id="cb28-4" title="4"></a>
<a class="sourceLine" id="cb28-5" title="5">all_bboxes <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb28-6" title="6"><span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb28-7" title="7"><span class="st">  </span><span class="kw">geom_sf</span>(<span class="dt">fill =</span> <span class="st">"white"</span>, <span class="dt">data =</span> world) <span class="op">+</span></a>
<a class="sourceLine" id="cb28-8" title="8"><span class="st">  </span><span class="kw">geom_sf</span>(<span class="kw">aes</span>(<span class="dt">fill =</span> which_geom), <span class="dt">alpha =</span> <span class="fl">0.5</span>, <span class="dt">show.legend =</span> <span class="ot">FALSE</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb28-9" title="9"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>which_geom, <span class="dt">ncol =</span> <span class="dv">2</span>)</a></code></pre></div>
<p><img src="reference/figures/unnamed-chunk-18-1.png" style="display: block; margin: auto;"></p>
</div>
<div id="how-can-we-go-faster" class="section level1">
<h1 class="hasAnchor">
<a href="#how-can-we-go-faster" class="anchor"></a>How can we go faster?</h1>
<p>Until Rtools 4.0 hits (or the <a href="https://github.com/lemire/simdjson"><code>simdjson</code></a> library decides to <a href="https://github.com/lemire/simdjson/issues/307">relax its C++17 requirement</a>), I’m not sure how we can go much faster while maintaining cross-platform compatibility. That said, if C++ is your mother tongue (and you see room for optimization), please don’t hesitate to contribute.</p>
</div>
<div id="acknowledgements" class="section level1">
<h1 class="hasAnchor">
<a href="#acknowledgements" class="anchor"></a>Acknowledgements</h1>
<p><code>{tweetio}</code> uses a combination of C++ via <a href="http://www.rcpp.org/"><code>{Rcpp}</code></a>, the <a href="http://rapidjson.org/"><code>rapidjson</code></a> C++ library (made available by <a href="https://cran.r-project.org/web/packages/rapidjsonr/index.html"><code>{rapidjsonr}</code></a>), and <strong>R’s secret weapon</strong>: <a href="https://rdatatable.gitlab.io/data.table/"><code>{data.table}</code></a>.</p>
<p>Major inspiration from <a href="https://gitlab.com/hrbrmstr/ndjson">{<code>ndjson</code>}</a> was taken, including its use of <a href="https://www.cs.unc.edu/Research/compgeom/gzstream/"><code>Gzstream</code></a>.</p>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/knapply/tweetio">https://​github.com/​knapply/​tweetio</a>
</li>
<li>Report a bug at <br><a href="https://github.com/knapply/tweetio/issues">https://​github.com/​knapply/​tweetio/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="citation">
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing tweetio</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Brendan Knapp <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-3284-4972" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID"></a> </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.tidyverse.org/lifecycle/#experimental"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle"></a></li>
<li><a href="https://github.com/knapply/tweetio/commits/master"><img src="https://img.shields.io/github/last-commit/knapply/tweetio.svg" alt="GitHub last commit"></a></li>
<li><a href="https://codecov.io/gh/knapply/tweetio?branch=master"><img src="https://codecov.io/gh/knapply/tweetio/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://ci.appveyor.com/project/knapply/tweetio"><img src="https://ci.appveyor.com/api/projects/status/github/knapply/tweetio?branch=master&amp;svg=true" alt="AppVeyor build status"></a></li>
<li><a href="https://travis-ci.org/knapply/tweetio"><img src="https://travis-ci.org/knapply/tweetio.svg?branch=master" alt="Travis-CI Build Status"></a></li>
<li><a href="https://www.gnu.org/licenses/gpl-3.0"><img src="https://img.shields.io/badge/License-GPLv3-blue.svg" alt="License: GPL v3"></a></li>
<li><a href="https://www.r-project.org/"><img src="https://img.shields.io/badge/Depends-GNU_R%3E=3.3-blue.svg" alt="Depends"></a></li>
<li><a href="https://github.com/knapply/tweetio"><img src="https://img.shields.io/github/languages/code-size/knapply/tweetio.svg" alt="GitHub code size in bytes"></a></li>
<li><a href="http://hits.dwyl.io/knapply/tweetio"><img src="http://hits.dwyl.io/knapply/tweetio.svg" alt="HitCount"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Brendan Knapp.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
